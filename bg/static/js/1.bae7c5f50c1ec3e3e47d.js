webpackJsonp([1],{HzJ8:function(t,e,a){t.exports={default:a("l+I1"),__esModule:!0}},"l+I1":function(t,e,a){a("SXOF"),a("mxCW"),t.exports=a("o6D2")},o6D2:function(t,e,a){var r=a("fRqy"),n=a("d+Iz");t.exports=a("Rv9F").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},rIRc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("HzJ8"),n=a.n(r),o=a("gyMJ"),s={name:"authority",data:function(){return{publicInfo:!0,policy:"",money:"",superMan:"",tableData:[],value:"",currentPage:1,pagesize:10,total:0}},created:function(){this.getUser()},methods:{getUser:function(){var t=this,e=this;this.tableData=[];var a={page:this.currentPage,rows:this.pagesize};o.a.getUserInfo(a).then(function(a){var r=!0,o=!1,s=void 0;try{for(var l,i=n()(a.obj.list);!(r=(l=i.next()).done);r=!0){var u=l.value,c=[{role:"141",name:"超级管理员",stast:!1},{role:"142",name:"通知公告",stast:!1},{role:"143",name:"财务学堂",stast:!1},{role:"144",name:"来款认领",stast:!1},{role:"145",name:"公务卡办理",stast:!1},{role:"146",name:"预算指南",stast:!1},{role:"147",name:"科研指南",stast:!1}],f=!0,d=!1,h=void 0;try{for(var p,v=n()(c);!(f=(p=v.next()).done);f=!0){var g=p.value,y=!0,m=!1,b=void 0;try{for(var _,w=n()(u.list);!(y=(_=w.next()).done);y=!0){var z=_.value;g.role===z.role&&(g.stast=!0)}}catch(t){m=!0,b=t}finally{try{!y&&w.return&&w.return()}finally{if(m)throw b}}}}catch(t){d=!0,h=t}finally{try{!f&&v.return&&v.return()}finally{if(d)throw h}}u.objList=c,e.tableData.push(u)}}catch(t){o=!0,s=t}finally{try{!r&&i.return&&i.return()}finally{if(o)throw s}}t.total=a.obj.total})},add:function(t){var e=this,a=[],r=!0,s=!1,l=void 0;try{for(var i,u=n()(t.objList);!(r=(i=u.next()).done);r=!0){var c=i.value;c.stast&&a.push(c.role)}}catch(t){s=!0,l=t}finally{try{!r&&u.return&&u.return()}finally{if(s)throw l}}var f={userid:t.id,role:a.join(",")};o.a.addAuthority(f).then(function(t){"添加成功！"==t.msg&&e.$message({showClose:!0,message:"保存成功",type:"success"}),e.getUser()})},del:function(t){var e=this,a={userid:t.id};o.a.delAuthority(a).then(function(t){"禁用成功！"==t.msg&&e.$message({showClose:!0,message:"删除成功",type:"success"}),e.getUser()})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.pagesize=t,this.getUser()},handleCurrentChange:function(t){console.log("当前页: "+t),this.currentPage=t,this.getUser()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"authority"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"role",label:"权限",width:"500","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.objList,function(e){return a("el-checkbox",{key:e.role,model:{value:e.stast,callback:function(a){t.$set(e,"stast",a)},expression:"item.stast"}},[t._v(t._s(e.name))])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"addDelete",label:"修改/删除权限",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.add(e.row)}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var i=a("C7Lr")(s,l,!1,function(t){a("s70/")},"data-v-3fd7b366",null);e.default=i.exports},"s70/":function(t,e){}});
//# sourceMappingURL=1.bae7c5f50c1ec3e3e47d.js.map