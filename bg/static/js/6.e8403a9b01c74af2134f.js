webpackJsonp([6],{GUyl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("gyMJ"),s=a("P+Pz"),o=(document.createElement("p"),document.createElement("a"),document.createElement("div"),s.a,document.createElement("p")),n=document.createElement("a"),l=document.createElement("div"),r={name:"show",data:function(){return{uploadUrl:this.GLOBAL.BASE_URL+"/api/Administration/group/UploadFile",fileList:[],currentPage:1,pagesize:10,total:0,tableData:[],dialogVisible:!1,image:"",titleInfo:"",editor:{info:""},isClear:!1,value:"",imgUrl:""}},created:function(){this.showPublic()},methods:{handleSuccess:function(t,e,a){console.log(e.name),""==t.data[0]?this.$message({showClose:!0,message:"上传失败",type:"warning"}):this.$message({showClose:!0,message:"上传成功",type:"success"}),o.append(n),n.className="download",n.innerText=e.name,n.href=t.data[0],n.download=e.name,l.append(o),this.editor.info+=l.innerHTML},showPublic:function(){var t=this,e={page:this.currentPage,rows:this.pagesize,type:1};i.a.getPublicContent(e).then(function(e){console.log(e),t.$message({showClose:!0,message:e.msg,type:"warning"}),t.tableData=e.obj.rows,t.total=e.obj.total})},add:function(){this.$router.push({path:"/public"})},deleteContent:function(t){var e=this;console.log(t.id);var a={id:t.id};i.a.DeleteNotice(a).then(function(t){e.$message({showClose:!0,message:t.msg,type:"success"}),e.showPublic(),console.log(t)})},editorContent:function(t){var e=this,a=this;this.value=t.id,this.dialogVisible=!0;var s={id:this.value};i.a.getDetail(s).then(function(t){console.log(t),e.editor.info="";var i=t.obj;a.imgUrl=i.pic,e.titleInfo=i.title,e.editor.info=i.content,e.image=e.GLOBAL.BASE_URL+"/"+i.pic,console.log(t.obj.content)})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.pagesize=t,this.showPublic()},handleCurrentChange:function(t){console.log("当前页: "+t),this.currentPage=t,this.showPublic()},tableRowClassName:function(t){t.row;var e=t.rowIndex;return 1===e?"warning-row":3===e?"success-row":""},uploadPhoto:function(t){var e=this,a=t.target.files[0];console.log(a);var i=a.size;a.name;i>2101440&&this.$message({showClose:!0,message:"图片不能超过2M",type:"warning"});var s=new FileReader;s.readAsDataURL(a),s.onload=function(t){e.image=t.target.result,e.imgUrl=t.target.result}},saveHtml:function(t){var e=this;console.log(this.image),""!=this.titleInfo&&""!=this.editor.info||this.$message({showClose:!0,message:"标题或内容不能为空",type:"warning"}),console.log(this.editor.info);var a={id:this.value,pic:this.imgUrl,title:this.titleInfo,content:this.editor.info};console.log(a.content),i.a.UpdateNotice(a).then(function(t){console.log(t),e.$message({showClose:!0,message:"保存成功",type:"success"}),e.showPublic()}),this.titleInfo="",this.image="",this.editor.info="",this.dialogVisible=!1,location.reload()},change:function(t){this.editor.info1=t}},components:{EditorBar:s.a}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"showListBox"},[a("div",{staticClass:"addUserBtn"},[a("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:t.add}},[t._v("增加")])],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"发布人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createat",label:"发布时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addDelete",label:"编辑"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.editorContent(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.deleteContent(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticClass:"editorContent"},[a("el-dialog",{attrs:{title:"增加内容",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"editor"},[a("p",[t._v("标题："),a("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"请输入内容"},model:{value:t.titleInfo,callback:function(e){t.titleInfo=e},expression:"titleInfo"}})],1),t._v(" "),a("p",[t._v("缩略图:\n                    "),a("a",{staticClass:"file",attrs:{href:"javascript:;"}},[t._v("选择图片\n                        "),a("input",{staticClass:"kyc-passin",attrs:{type:"file"},on:{change:function(e){return t.uploadPhoto(e)}}})])]),t._v(" "),a("p",{staticClass:"image"},[a("img",{staticClass:"editorImage",attrs:{src:t.image,alt:""}})]),t._v(" "),a("editor-bar",{attrs:{isClear:t.isClear},on:{change:t.change},model:{value:t.editor.info,callback:function(e){t.$set(t.editor,"info",e)},expression:"editor.info"}}),t._v(" "),a("div",{staticClass:"upload"},[a("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:t.uploadUrl,"on-success":t.handleSuccess,limit:3,multiple:"","method:":"post",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel,.csv,text/plain","file-list":t.fileList}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""}},[t._v("上传附件")])],1)],1)],1),t._v(" "),a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveHtml}},[t._v("保存")])],1)])],1)])},staticRenderFns:[]};var d=a("C7Lr")(r,c,!1,function(t){a("H5oE")},"data-v-a4b69fbc",null);e.default=d.exports},H5oE:function(t,e){}});
//# sourceMappingURL=6.e8403a9b01c74af2134f.js.map