webpackJsonp([17],{KnzD:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("gyMJ"),o=s("P+Pz"),i=(document.createElement("p"),document.createElement("a"),document.createElement("div"),o.a,document.createElement("p")),n=document.createElement("a"),l=document.createElement("div"),c={name:"public",data:function(){return{uploadUrl:this.GLOBAL.BASE_URL+"/api/Administration/group/UploadFile",fileList:[],image:"",titleInfo:"",content:"",editor:{info:""},isClear:!1}},methods:{handleSuccess:function(e,t,s){console.log(t.name),""==e.data[0]?this.$message({showClose:!0,message:"上传失败",type:"warning"}):this.$message({showClose:!0,message:"上传成功",type:"success"}),i.append(n),n.className="download",n.innerText=t.name,n.href=e.data[0],n.download=t.name,l.append(i),this.editor.info+=l.innerHTML,console.log(this.editor.info)},uploadPhoto:function(e){var t=this,s=this,a=e.target.files[0],o=a.size;a.name;o>2101440&&this.$message({showClose:!0,message:"图片不能超过2M",type:"warning"});var i=new FileReader;i.readAsDataURL(a),i.onload=function(e){s.image=e.target.result,console.log(t.image)}},saveHtml:function(e){var t=this;console.log(i);if(console.log(this.image),""!=this.titleInfo&&""!=this.editor.info){console.log(this.editor.info);var s={pic:this.image,title:this.titleInfo,content:this.editor.info};console.log(s.content),a.a.publicContent(s).then(function(e){console.log(e),t.$message({showClose:!0,message:"保存成功",type:"success"}),t.titleInfo="",t.image="",t.editor.info="",t.$router.push({path:"/show"})})}else this.$message({showClose:!0,message:"标题或内容不能为空",type:"warning"})},change:function(e){this.editor.info1=e}},components:{EditorBar:o.a}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"editor"},[s("p",[e._v("标题："),s("el-input",{staticStyle:{width:"95%"},attrs:{autofocus:"true",placeholder:"请输入内容"},model:{value:e.titleInfo,callback:function(t){e.titleInfo=t},expression:"titleInfo"}})],1),e._v(" "),s("p",[e._v("缩略图:\n            "),s("a",{staticClass:"file",attrs:{href:"javascript:;"}},[e._v("选择图片\n                "),s("input",{staticClass:"kyc-passin",attrs:{type:"file"},on:{change:function(t){return e.uploadPhoto(t)}}})])]),e._v(" "),s("p",{staticClass:"image"},[s("img",{attrs:{src:e.image,alt:""}})]),e._v(" "),s("editor-bar",{attrs:{isClear:e.isClear},on:{change:e.change},model:{value:e.editor.info,callback:function(t){e.$set(e.editor,"info",t)},expression:"editor.info"}}),e._v(" "),s("div",{staticClass:"upload"},[s("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:e.uploadUrl,"on-success":e.handleSuccess,limit:3,multiple:"","method:":"post",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel,.csv,text/plain","file-list":e.fileList}},[s("el-button",{attrs:{size:"small",type:"primary",plain:""}},[e._v("上传附件")])],1)],1)],1),e._v(" "),s("div",{staticClass:"button"},[s("el-button",{attrs:{type:"primary"},on:{click:e.saveHtml}},[e._v("保存")])],1)])},staticRenderFns:[]};var d=s("C7Lr")(c,r,!1,function(e){s("oeX+")},"data-v-19b07b1a",null);t.default=d.exports},"oeX+":function(e,t){}});
//# sourceMappingURL=17.937de0a870e2a2089cc4.js.map